# SAI Dashboard Environment Configuration
# Copy this file to .env and fill in your actual values

# =================================================================
# DATABASE CONFIGURATION (n8n PostgreSQL)
# =================================================================

# Full database connection string
DATABASE_URL=postgresql://n8n_user:REDACTED@localhost:5432/n8n

# Individual database connection parameters (alternative to DATABASE_URL)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=n8n
DB_USER=n8n_user
DB_PASSWORD=REDACTED

# Connection pool settings
DB_MAX_CONNECTIONS=5
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# =================================================================
# APPLICATION CONFIGURATION
# =================================================================

# Environment
NODE_ENV=development

# Server ports
API_PORT=3001
FRONTEND_PORT=3000

# CORS configuration
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# =================================================================
# SAI DASHBOARD SPECIFIC SETTINGS
# =================================================================

# Target workflow name (do not change unless workflow is renamed)
SAI_WORKFLOW_NAME=Sai-webhook-upload-image+Ollama-analisys+telegram-sendphoto

# Pagination and limits
DEFAULT_PAGE_SIZE=50
MAX_PAGE_SIZE=200
MAX_DAYS_LOOKBACK=365

# Image processing
MAX_IMAGE_SIZE=5242880  # 5MB in bytes
SUPPORTED_IMAGE_FORMATS=jpeg,png,webp
IMAGE_CACHE_TTL=3600    # 1 hour in seconds

# API response caching
CACHE_TTL=300           # 5 minutes in seconds
ENABLE_RESPONSE_CACHE=true

# =================================================================
# SECURITY CONFIGURATION
# =================================================================

# API Authentication (optional)
# Leave empty to disable authentication
API_KEY=
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Request rate limiting
RATE_LIMIT_WINDOW_MS=60000  # 1 minute
RATE_LIMIT_MAX_REQUESTS=100 # requests per window
RATE_LIMIT_BURST_MAX=20     # burst requests
RATE_LIMIT_BURST_WINDOW=10000 # 10 seconds

# Security headers
ENABLE_HELMET=true
TRUST_PROXY=true

# =================================================================
# LOGGING CONFIGURATION  
# =================================================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Log format (json, simple)
LOG_FORMAT=simple

# Log file path (optional, logs to console if not set)
LOG_FILE_PATH=

# Enable database query logging
LOG_DATABASE_QUERIES=false

# =================================================================
# EXTERNAL SERVICES (for future enhancements)
# =================================================================

# Redis for caching (optional)
REDIS_URL=redis://localhost:6379
REDIS_TTL=300

# Webhook notifications (optional)
WEBHOOK_URL=
WEBHOOK_SECRET=

# =================================================================
# DEVELOPMENT SETTINGS
# =================================================================

# Enable development features
ENABLE_DEV_TOOLS=true

# Hot reload
ENABLE_HOT_RELOAD=true

# API documentation
ENABLE_API_DOCS=true

# Sample data generation
ENABLE_SAMPLE_DATA=false

# =================================================================
# PRODUCTION OVERRIDES
# =================================================================

# Production-specific settings
# Uncomment and modify for production deployment

# NODE_ENV=production
# LOG_LEVEL=warn
# LOG_FORMAT=json
# ENABLE_DEV_TOOLS=false
# CACHE_TTL=900  # 15 minutes
# RATE_LIMIT_MAX_REQUESTS=200

# Production database (if different)
# DATABASE_URL=postgresql://sai_user:secure_password@prod-db:5432/n8n

# SSL/TLS configuration
# SSL_KEY_PATH=/path/to/ssl/key.pem
# SSL_CERT_PATH=/path/to/ssl/cert.pem

# =================================================================
# MONITORING AND OBSERVABILITY  
# =================================================================

# Health check configuration
HEALTH_CHECK_TIMEOUT=5000 # 5 seconds
ENABLE_SYSTEM_METRICS=true

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_SAMPLE_RATE=0.1 # 10% sampling

# Error reporting (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =================================================================
# FEATURE FLAGS
# =================================================================

# Enable/disable specific features
FEATURE_IMAGE_PROCESSING=true
FEATURE_REAL_TIME_UPDATES=false
FEATURE_EXPORT_FUNCTIONALITY=true
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_USER_AUTHENTICATION=false

# =================================================================
# DOCKER CONFIGURATION
# =================================================================

# Docker-specific overrides
# Used when running in containers

# Internal service URLs (for docker-compose)
# DB_HOST=postgres
# REDIS_URL=redis://redis:6379

# Container health check
# HEALTHCHECK_INTERVAL=30s
# HEALTHCHECK_TIMEOUT=10s
# HEALTHCHECK_RETRIES=3

# =================================================================
# BACKUP AND MAINTENANCE
# =================================================================

# Automated cleanup settings
AUTO_CLEANUP_ENABLED=false
CLEANUP_RETENTION_DAYS=90
CLEANUP_SCHEDULE=0 2 * * 0  # Sunday 2 AM

# Backup integration
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 3 * * 0   # Sunday 3 AM
BACKUP_RETENTION_WEEKS=4